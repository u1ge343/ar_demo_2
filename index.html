<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AR Menu</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- A-Frame -->
<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

<!-- AR.js -->
<script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>

<!-- Animation Mixer -->
<script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
body{
 margin:0;
 background:#0b0b0b;
 font-family:Inter,sans-serif;
 overflow:hidden;
}

/* LOADER */
#loader{
 position:fixed;
 inset:0;
 background:rgba(10,10,10,.92);
 display:none;
 align-items:center;
 justify-content:center;
 color:#fff;
 letter-spacing:.3px;
 z-index:30;
}

/* MENU */
#menuOverlay{
 position:fixed;
 inset:0;
 background:rgba(0,0,0,.55);
 backdrop-filter:blur(22px);
 display:flex;
 align-items:center;
 justify-content:center;
 z-index:20;
}

.menuBox{
 width:min(92%,420px);
 background:rgba(25,25,25,.85);
 padding:34px;
 border-radius:22px;
 box-shadow:0 25px 80px rgba(0,0,0,.7);
}

.menuTitle{
 color:#fff;
 text-align:center;
 font-size:22px;
 font-weight:500;
 margin-bottom:28px;
}

.menuCard{
 padding:18px;
 border-radius:16px;
 background:rgba(255,255,255,.05);
 border:1px solid rgba(255,255,255,.08);
 margin-bottom:16px;
 cursor:pointer;
 transition:.25s;
}

.menuCard:hover{
 background:rgba(255,255,255,.09);
}

.dishName{
 color:#fff;
 font-size:17px;
}

.dishDesc{
 color:#cfcfcf;
 font-size:13px;
 margin-top:6px;
}

.price{
 color:#e7c873;
 font-size:14px;
 margin-top:8px;
}

/* BOTTOM BAR */
#bottomBar{
 position:fixed;
 bottom:22px;
 left:50%;
 transform:translateX(-50%);
 background:rgba(15,15,15,.7);
 backdrop-filter:blur(14px);
 padding:14px 22px;
 border-radius:20px;
 display:none;
 align-items:center;
 gap:18px;
 color:#fff;
 z-index:10;
}

.controlBtn{
 padding:6px 14px;
 background:rgba(255,255,255,.08);
 border-radius:10px;
 cursor:pointer;
 transition:.2s;
}

.controlBtn:hover{
 background:rgba(255,255,255,.14);
}

#dishLabel{
 min-width:140px;
 text-align:center;
 font-weight:500;
}

/* AR SHADOW */
.shadow{
 width:2.6;
 height:2.6;
 background:radial-gradient(circle, rgba(0,0,0,.45), rgba(0,0,0,0));
}

/* FADE */
.fadeIn{
 animation:fade .4s ease forwards;
}

@keyframes fade{
 from{opacity:0;}
 to{opacity:1;}
}
</style>
</head>

<body>

<div id="loader">Loading model…</div>

<!-- MENU -->
<div id="menuOverlay">
 <div class="menuBox fadeIn">

  <div class="menuTitle">Menu</div>

  <div class="menuCard" onclick="selectDish(0)">
   <div class="dishName">Pomodoro Pasta</div>
   <div class="dishDesc">Slow tomato sauce, basil</div>
   <div class="price">₹299</div>
  </div>

  <div class="menuCard" onclick="selectDish(1)">
   <div class="dishName">Capybara Piccata</div>
   <div class="dishDesc">Lemon butter garlic sauce</div>
   <div class="price">₹399</div>
  </div>

 </div>
</div>

<!-- CONTROLS -->
<div id="bottomBar">
 <div class="controlBtn" onclick="prevDish()">‹</div>
 <div id="dishLabel"></div>
 <div class="controlBtn" onclick="nextDish()">›</div>
</div>

<!-- AR -->
<a-scene embedded arjs="sourceType:webcam;debugUIEnabled:false">

<a-assets>
 <a-asset-item id="pastaModel"
  src="https://raw.githubusercontent.com/u1ge343/RES_AR/refs/heads/main/assets/a.glb"></a-asset-item>

 <a-asset-item id="capyModel"
  src="assets/jb.glb"></a-asset-item>
</a-assets>

<!-- LIGHTING -->
<a-entity light="type:ambient;intensity:0.7"></a-entity>
<a-entity light="type:directional;intensity:1.2" position="0 3 2"></a-entity>

<a-marker preset="hiro">

 <!-- SOFT SHADOW -->
 <a-plane rotation="-90 0 0"
  width="2.6" height="2.6"
  material="shader:flat; transparent:true; opacity:0.45;
  src:data:image/svg+xml;utf8,
  <svg xmlns='http://www.w3.org/2000/svg' width='256' height='256'>
  <defs>
   <radialGradient id='g'>
    <stop offset='0%' stop-color='black'/>
    <stop offset='70%' stop-color='black'/>
    <stop offset='100%' stop-color='transparent'/>
   </radialGradient>
  </defs>
  <rect width='256' height='256' fill='url(#g)'/>
  </svg>">
 </a-plane>

 <!-- PASTA -->
 <a-entity id="pastaHolder"
  position="0 0.6 0"
  animation="property:rotation;to:0 360 0;loop:true;dur:16000">

  <a-entity id="pasta"
   gltf-model="#pastaModel"
   scale="8 8 8"
   visible="false"></a-entity>

 </a-entity>

 <!-- CAPY -->
 <a-entity id="capyHolder" position="0 0.6 0">

  <a-entity id="capy"
   gltf-model="#capyModel"
   animation-mixer="clip:*;loop:repeat"
   scale="5 5 5"
   visible="false"></a-entity>

 </a-entity>

</a-marker>

<a-entity camera></a-entity>
</a-scene>

<script>
const dishes=[
 {name:"Pomodoro Pasta", id:"pasta"},
 {name:"Capybara Piccata", id:"capy"}
];

let currentIndex=0;

const overlay=document.getElementById("menuOverlay");
const loader=document.getElementById("loader");
const bottomBar=document.getElementById("bottomBar");
const dishLabel=document.getElementById("dishLabel");

function hideAll(){
 document.getElementById("pasta").setAttribute("visible","false");
 document.getElementById("capy").setAttribute("visible","false");
}

function showDish(i){
 loader.style.display="flex";
 hideAll();
 currentIndex=i;

 const model=document.getElementById(dishes[i].id);

 model.addEventListener("model-loaded",()=>{
   loader.style.display="none";
   if(model.hasAttribute("animation-mixer")){
     model.components["animation-mixer"].play();
   }
 },{once:true});

 model.setAttribute("visible","true");
 dishLabel.textContent=dishes[i].name;
}

function selectDish(i){
 overlay.style.display="none";
 bottomBar.style.display="flex";
 showDish(i);
}

function prevDish(){
 let i=currentIndex-1;
 if(i<0) i=dishes.length-1;
 showDish(i);
}

function nextDish(){
 let i=currentIndex+1;
 if(i>=dishes.length) i=0;
 showDish(i);
}
</script>

</body>
</html>
